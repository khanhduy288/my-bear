<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Bear</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" href="data:image/jpeg;base64,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" type="image/png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #ff9a9e, #fad0c4);
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            height: 100vh;
        }

        .chat-box {
            display: flex;
            flex-direction: column;
            height: 100%;
            width: 100%;
            margin: 0 auto;
            background: #fff;
            border-radius: 0;
            box-shadow: none;
        }

        #chat-messages {
            flex-grow: 1;
            overflow-y: auto;
            padding: 10px;
            background-color: #f9f9f9;
        }

        .chat-message {
            display: flex;
            align-items: flex-start;
            margin-bottom: 10px;
        }

        .chat-message img {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            margin-right: 10px;
        }

        .message-bubble {
            max-width: 70%;
            padding: 8px 12px;
            border-radius: 15px;
            word-wrap: break-word;
        }

        .message-bubble.received {
            background-color: rgba(255, 255, 255, 0.8);
            color: #006633;
        }

        .message-bubble.sent {
            /* Giữ cùng kiểu hiển thị như received */
            background-color: rgba(255, 255, 255, 0.8);
            color: #333;
        }

        .input-box {
            display: flex;
            align-items: center;
            padding: 10px;
            background-color: #fff;
            border-top: 1px solid #ccc;
        }

        .input-box input {
            flex-grow: 1;
            border-radius: 20px;
            padding: 8px;
            margin-right: 10px;
            border: 1px solid #ccc;
            font-size: 14px;
        }

        .send-button {
            background-color: #ff7f7f;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
        }

        .send-button:hover {
            background-color: #ff5050;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .chat-message img {
                width: 25px;
                height: 25px;
            }

            .message-bubble {
                padding: 6px 10px;
                font-size: 12px;
            }

            .input-box input {
                font-size: 12px;
                padding: 6px;
            }

            .send-button {
                padding: 6px 10px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="chat-box">
        <h3 class="text-center text-danger py-2">💕 My Bear 💕</h3>

        <!-- Messages -->
        <div id="chat-messages">
            <!-- Tin nhắn sẽ được thêm vào đây -->
        </div>

        <!-- Input -->
        <div class="input-box">
            <input id="message-input" type="text" placeholder="Type your message...">
            <button class="send-button" id="send-button">Send</button>
        </div>
    </div>

    <script>
        const apiURL = "https://65682fed9927836bd9743814.mockapi.io/api/singup/webchat";

        // Tải tin nhắn từ API
        async function loadMessages() {
            const response = await fetch(apiURL);
            const messages = await response.json();
            const chatContainer = document.getElementById('chat-messages');
            chatContainer.innerHTML = '';

            messages.forEach(message => {
                addMessageToUI(message, false);
            });

            // Tự động cuộn xuống cuối
            scrollToBottom();
        }

        // Thêm tin nhắn vào giao diện
        function addMessageToUI(message, isSent) {
            const chatContainer = document.getElementById('chat-messages');
            const messageElement = document.createElement('div');
            messageElement.classList.add('chat-message', isSent ? 'sent' : 'received');
            messageElement.innerHTML = `
                <img src="${message.avatar}" alt="Avatar">
                <div class="message-bubble ${isSent ? 'sent' : 'received'}">
                    <strong>${message.name}:</strong> ${message.tinnhan}
                </div>
            `;
            chatContainer.appendChild(messageElement);
            scrollToBottom();
        }

        // Cuộn xuống cuối khung chat
        function scrollToBottom() {
            const chatContainer = document.getElementById('chat-messages');
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // Gửi tin nhắn
        async function sendMessage() {
            const inputElement = document.getElementById('message-input');
            const message = inputElement.value;

            const name = localStorage.getItem('userName') || "Anonymous";
            const avatar = localStorage.getItem('userAvatar') || "https://via.placeholder.com/30";

            if (!message) {
                alert('Please enter a message before sending.');
                return;
            }

            const newMessage = {
                tinnhan: message,
                name: name,
                avatar: avatar
            };

            // Hiển thị tin nhắn ngay lập tức trên giao diện
            addMessageToUI(newMessage, true);

            // Gửi tin nhắn lên API
            await fetch(apiURL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(newMessage)
            });

            inputElement.value = '';
        }

        // Gán phím Enter để gửi tin nhắn
        document.getElementById('message-input').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Sự kiện khi nhấn nút gửi
        document.getElementById('send-button').addEventListener('click', sendMessage);

        // Khởi động
        loadMessages();
    </script>
</body>
</html>
